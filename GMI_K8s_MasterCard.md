рдЕрд░реЗ рд╡рд╛ рднрд╛рдК! ЁЯФе  
рддреВ рдорд╛рд╕реНрдЯрд░рдХрд╛рд░реНрдбрдЪреНрдпрд╛ рдЗрдВрдЯрд░рд╡реНрд╣реВрд╕рд╛рдареА рддрдпрд╛рд░реА рдХрд░рддреЛрдпрд╕ тАФ рдЖрдгрд┐ рддреЛ рдЦреВрдк рдорд╣рддреНрддреНрд╡рд╛рдЪрд╛ рдЯрдкреНрдкрд╛ рдЖрд╣реЗ.  
рддреВ рдорд▓рд╛ рд╕рд╛рдВрдЧрд┐рддрд▓рдВрдп: *"рдорд▓рд╛ рд╣реЗ рд╕рдЧрд│рдВ **рд╕реЛрдкреНрдпрд╛ рдореЕрдирд┐рдлреЗрд╕реНрдЯреНрд╕** рд╡рд╛рдкрд░реВрди, **EKS** рд╡рд░, **Istio** рд╕реЛрдмрдд, **рд╕реНрдкрд╖реНрдЯрдкрдгреЗ** рд╕рд╛рдВрдЧрд╛рдпрдЪрдВрдп тАФ рдЖрдгрд┐ рдорд╕реНрдд рдЫрд╛рди рдмреЛрд▓рд╛рдпрдЪрдВрдп!"*

ЁЯСЙ рдореА рддреБрд▓рд╛ **рдПрдХрджрдо рдЗрдВрдЯрд░рд╡реНрд╣реВ-рдлреНрд░реЗрдВрдбрд▓реА**, **рд╕реЛрдкрдВ**, **рдкреНрд░рднрд╛рд╡реА** рдЙрддреНрддрд░ рджреЗрддреЛрдп тАФ рдЬреНрдпрд╛рдд:

- тЬЕ рдлрдХреНрдд YAMLs (no Kustomize)
- тЬЕ EKS cluster рдЪрд╛ рдЙрд▓реНрд▓реЗрдЦ
- тЬЕ Istio virtual service + host
- тЬЕ `avadesh-app` рд╕рд╛рд░рдЦрдВ рдирд╛рд╡
- тЬЕ ArgoCD + Helm flow
- тЬЕ GitOps рдЪрд╛ рдлреНрд▓реЛ
- тЬЕ рддреВ рдорд╕реНрдд рдЫрд╛рди рдмреЛрд▓реВ рд╢рдХрд╢реАрд▓ рдЕрд╢реА рднрд╛рд╖рд╛

---

## ЁЯОд рдЗрдВрдЯрд░рд╡реНрд╣реВрдордзреНрдпреЗ рдХрд╕рдВ рдмреЛрд▓рд╛рдпрдЪрдВ? (рдорд╕реНрдд рдЫрд╛рди рдЖрдгрд┐ рд╕реНрдкрд╖реНрдЯ)

> ЁЯСитАНЁЯТ╗ **рддреБрдореНрд╣реА рдореНрд╣рдгрд╛рд▓:**  
> "рд╣реЛрдп, рдореА рдПрдХ GitOps-based deployment pipeline рд╕реЗрдЯрдЕрдк рдХреЗрд▓реА рдЖрд╣реЗ тАФ рдЬреНрдпрд╛рдд рдореА **ArgoCD**, **Helm**, **EKS**, рдЖрдгрд┐ **Istio** рд╡рд╛рдкрд░рддреЛ.  
> рдЪрд▓рд╛ рдореА рддреБрдореНрд╣рд╛рд▓рд╛ рдПрдХрд╛ рдЙрджрд╛рд╣рд░рдгрд╛рддреВрди рд╕рдордЬрд╛рд╡реВрди рд╕рд╛рдВрдЧрддреЛ: `avadesh-app` рдирд╛рд╡рд╛рдЪрдВ рдПрдХ рдорд╛рдпрдХреНрд░реЛрд╕рд░реНрд╡реНрд╣рд┐рд╕."

---

### ЁЯз▒ 1. рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░: рдХрд╛рдп рдХрд╛рдп рдЖрд╣реЗ?

- **AWS EKS Cluster**: рдорд╛рдЭрдВ Kubernetes cluster рдЖрд╣реЗ.
- **ArgoCD**: рдореА рддреНрдпрд╛рд▓рд╛ GitOps tool рдореНрд╣рдгреВрди рд╡рд╛рдкрд░рддреЛ тАФ рддреЛ рдлрдХреНрдд `git` рдкрд╛рд╣рддреЛ рдЖрдгрд┐ рдСрдЯреЛрдореЕрдЯрд┐рдХ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддреЛ.
- **Helm**: рдорд╛рдЭреНрдпрд╛ app рдЪрдВ templating тАФ deployment, service, ingress (рдХрд┐рдВрд╡рд╛ Istio rules).
- **Istio**: рдореА traffic management, routing, mTLS рд╕рд╛рдареА рд╡рд╛рдкрд░рддреЛ.
- **GitHub Actions (GHA)**: CI рдордзреНрдпреЗ image build рдХрд░рддреЛ рдЖрдгрд┐ deployment config update рдХрд░рддреЛ.
- **JFrog Artifactory**: Docker images рд╕реНрдЯреЛрдЕрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА.

---

### ЁЯУБ 2. рд░реЗрдкреЛрдЬрдЪреА рд░рдЪрдирд╛ (рд╕реЛрдкреА)

рдорд╛рдЭреНрдпрд╛рдХрдбреЗ рджреЛрди рд░реЗрдкреЛ рдЖрд╣реЗрдд:

#### ЁЯФ╣ `avadesh-app` (рдХреЛрдб рд░реЗрдкреЛ)
```
avadesh-app/
тФЬтФАтФА src/
тФЬтФАтФА Dockerfile
тФФтФАтФА helm/
    тФЬтФАтФА Chart.yaml
    тФЬтФАтФА values.yaml
    тФФтФАтФА templates/
        тФЬтФАтФА deployment.yaml
        тФЬтФАтФА service.yaml
        тФФтФАтФА virtualservice-istio.yaml   тЖР Istio rule
```

> ЁЯСЙ Helm chart рдЗрдереЗрдЪ рдЖрд╣реЗ тАФ рдореНрд╣рдгрдЬреЗ developers рд▓рд╛ рд▓реЛрдХрд▓рд▓рд╛ test рдХрд░рддрд╛ рдпреЗрдИрд▓.

---

#### ЁЯФ╣ `k8s-applications` (рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рд░реЗрдкреЛ тАФ GitOps рд╕реЛрд░реНрд╕ рдСрдл рдЯреНрд░реВрде)
```
k8s-applications/
тФФтФАтФА dev/
    тФЬтФАтФА avadesh-app-values.yaml     тЖР environment-specific values
    тФФтФАтФА avadesh-app-application.yaml тЖР ArgoCD manifest
```

> тЬЕ рд╣реЗ рд░реЗрдкреЛ рдлрдХреНрдд deployment config рд╕рд╛рдареА рдЖрд╣реЗ.  
> тЬЕ рдХреЛрдгрддрд╛рд╣реА рдХреЛрдб рдирд╛рд╣реА тАФ рдлрдХреНрдд YAMLs.

---

### ЁЯЪА 3. рдкреНрд░рддреНрдпрдХреНрд╖рд╛рдд рдлреНрд▓реЛ рдХрд╕рд╛ рдЪрд╛рд▓рддреЛ? (рдЗрдВрдЯрд░рд╡реНрд╣реВрдордзреНрдпреЗ рдорд╕реНрдд рдмреЛрд▓рд╛рдпрдЪрдВ)

> ЁЯСитАНЁЯТ╗ **рддреБрдореНрд╣реА рдореНрд╣рдгрд╛рд▓:**  
> "рдЬреЗрд╡реНрд╣рд╛ рдореА рдХреЛрдбрдордзреНрдпреЗ рдмрджрд▓ рдХрд░рддреЛ, рддреЗрд╡реНрд╣рд╛ рд╣реЗ рд╕рдЧрд│рдВ рдСрдЯреЛрдореЕрдЯрд┐рдХ рд╣реЛрддрдВ."

#### тЬЕ рд╕реНрдЯреЗрдк 1: рдХреЛрдб рдкреБрд╢ рдХреЗрд▓рд╛ тЖТ GitHub Actions trigger рдЭрд╛рд▓реЗ

- GHA:
  - Docker image build рдХреЗрд▓рдВ
  - JFrog Artifactory рдордзреНрдпреЗ push рдХреЗрд▓рдВ тЖТ `docker.jfrog.io/genmills/avadesh-app:sha-abc123`
  - рдирдВрддрд░ `k8s-applications/dev/avadesh-app-values.yaml` update рдХреЗрд▓рдВ:

```yaml
# k8s-applications/dev/avadesh-app-values.yaml
image:
  repository: docker.jfrog.io/genmills/avadesh-app
  tag: sha-abc123

replicaCount: 3

istio:
  enabled: true
  hosts:
    - avadesh.k8s.genmills.com
```

> ЁЯФБ рдлрдХреНрдд image tag update рдХреЗрд▓рд╛ тАФ рдмрд╛рдХреА рд╕рдЧрд│рдВ рддрд╕рдВрдЪ.

#### тЬЕ рд╕реНрдЯреЗрдк 2: Git push рдХреЗрд▓рдВ `k8s-applications` рдордзреНрдпреЗ

- рдЖрддрд╛ рдирд╡реАрди commit рдЖрд╣реЗ: *"Deploy new image sha-abc123 for avadesh-app"*

#### тЬЕ рд╕реНрдЯреЗрдк 3: ArgoCD рд▓рд╛ рдмрджрд▓ рджрд┐рд╕рд▓рд╛

- ArgoCD рдирд┐рдпрдорд┐рддрдкрдгреЗ `k8s-applications` рд░реЗрдкреЛ рдкреЙрд▓ рдХрд░рддреЛ.
- рддреНрдпрд╛рд▓рд╛ рдмрджрд▓ рджрд┐рд╕рд▓рд╛ тЖТ рдореНрд╣рдгреВрди рддреЛ sync рдХрд░рд╛рдпрд▓рд╛ рд▓рд╛рдЧрд▓рд╛.

#### тЬЕ рд╕реНрдЯреЗрдк 4: ArgoCD рдореЕрдирд┐рдлреЗрд╕реНрдЯ рд╡рд╛рдЪрддреЛ

```yaml
# k8s-applications/dev/avadesh-app-application.yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
meta
  name: avadesh-app-dev
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://github.com/genmills/avadesh-app.git
    targetRevision: main
    path: helm
    helm:
      valueFiles:
        - avadesh-app-values.yaml   # тЖР рдЗрдерд▓рдВ values рд╡рд╛рдкрд░рд╛рдпрдЪрдВ
  destination:
    server: https://kubernetes.default.svc
    namespace: avadesh-dev
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
```

> ЁЯФН ArgoCD рдореНрд╣рдгрддреЛ:  
> "рдорд▓рд╛ Helm chart рдШреНрдпрд╛рдпрдЪрд╛ рдЖрд╣реЗ `avadesh-app/helm` рдкрд╛рд╕реВрди, рдЖрдгрд┐ `avadesh-app-values.yaml` рдпрд╛рддрд▓рдВ config рд╡рд╛рдкрд░рд╛рдпрдЪрдВ рдЖрд╣реЗ."

#### тЬЕ рд╕реНрдЯреЗрдк 5: Deployment рдЭрд╛рд▓рдВ!

- ArgoCD:
  - Helm chart fetch рдХрд░рддреЛ
  - `values.yaml` merge рдХрд░рддреЛ
  - Kubernetes рдордзреНрдпреЗ apply рдХрд░рддреЛ
- Istio VirtualService рдкрдг deploy рд╣реЛрддреЛ:

```yaml
# avadesh-app/helm/templates/virtualservice.yaml
apiVersion: networking.istio.io/v1beta1
kind: VirtualService
meta
  name: avadesh-app-vs
spec:
  hosts:
    - "{{ .Values.istio.hosts[0] }}"   # тЖР avadesh.k8s.genmills.com
  http:
    - route:
        - destination:
            host: avadesh-app-svc
```

> ЁЯМР рдореНрд╣рдгрдЬреЗ рдЖрддрд╛ `avadesh.k8s.genmills.com` рд╡рд░ app live рдЖрд╣реЗ!

---

### тЬЕ 4. рдлрд╛рдпрджреЗ рд╕рд╛рдВрдЧ (рдЗрдВрдЯрд░рд╡реНрд╣реВрдордзреНрдпреЗ рдЗрдореНрдкреНрд░реЗрд╕ рдХрд░)

> ЁЯСитАНЁЯТ╗ **рддреБрдореНрд╣реА рдореНрд╣рдгрд╛рд▓:**  
> "рд╣реНрдпрд╛ рд╕рд┐рд╕реНрдЯрдордЪреЗ рдХрд╛рд╣реА рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдлрд╛рдпрджреЗ рдЖрд╣реЗрдд:"

| рдлрд╛рдпрджрд╛ | рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг |
|-------|-------------|
| **GitOps** | рд╕рдЧрд│реЗ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯреНрд╕ рдЬрд┐рдЯрдордзреНрдпреЗ тАФ рдХреЛрдгрддрд╛рд╣реА рдореЕрдиреНрдпреБрдЕрд▓ рдбрд┐рдкреНрд▓реЙрдп рдирд╛рд╣реА |
| **Audit Trail** | рдХреЛрдгрддрдВ рдЗрдореЗрдЬ рдХрдзреА рдбрд┐рдкреНрд▓реЙрдп рдЭрд╛рд▓рдВ тАФ рддреЗ рдХрдорд┐рдЯрдордзреНрдпреЗ рджрд┐рд╕рддрдВ |
| **Rollback рд╕реЛрдкрдВ** | рдлрдХреНрдд git revert рдХрд░рд╛ тАФ ArgoCD рдСрдЯреЛрдореЕрдЯрд┐рдХ рд░реЛрд▓рдмреЕрдХ рдХрд░реЗрд▓ |
| **Environment Isolation** | Dev, QA, Prod рд╕рд╛рдареА рд╡реЗрдЧрд╡реЗрдЧрд│реЗ `values.yaml` |
| **Security** | ArgoCD рдлрдХреНрдд `k8s-applications` рд╡рд░реВрди deploy рдХрд░рддреЛ тАФ рдХреЛрдгреАрд╣реА рдереЗрдЯ рдХреНрд▓рд╕реНрдЯрд░рд▓рд╛ access рдирд╛рд╣реА |

---

### ЁЯТм рдЗрдВрдЯрд░рд╡реНрд╣реВрдордзреНрдпреЗ рд╢реЗрд╡рдЯреА рдХрд╕рдВ рдмреЛрд▓рд╛рдпрдЪрдВ?

> ЁЯСитАНЁЯТ╗ **рддреБрдореНрд╣реА рдореНрд╣рдгрд╛рд▓:**  
> "рдореНрд╣рдгрдЬреЗ, рдореА рдХреЛрдб рдкреБрд╢ рдХреЗрд▓рд╛ тЖТ CI рдиреЗ рдЗрдореЗрдЬ рдмрд┐рд▓реНрдб рдХреЗрд▓рдВ тЖТ deployment config update рдЭрд╛рд▓рдВ тЖТ ArgoCD рдСрдЯреЛрдореЕрдЯрд┐рдХ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓рдВ тАФ рдЖрдгрд┐ рдЖрддрд╛ рдорд╛рдЭрдВ `avadesh-app` EKS рдХреНрд▓рд╕реНрдЯрд░рдордзреНрдпреЗ рд▓рд╛рдЗрд╡реНрд╣ рдЖрд╣реЗ, Istio рдЪреНрдпрд╛ `avadesh.k8s.genmills.com` рд╣реЛрд╕реНрдЯрд╡рд░реВрди accessible рдЖрд╣реЗ.  
> рд╣реЗ рд╕рдЧрд│рдВ **GitOps** рдЪреНрдпрд╛ рддрддреНрддреНрд╡рд╛рд╡рд░ рдЪрд╛рд▓рддрдВ тАФ рдореНрд╣рдгрдЬреЗ **declarative, auditable, рдЖрдгрд┐ automated**."

---

## ЁЯОп рдЗрдВрдЯрд░рд╡реНрд╣реВ рдЯрд┐рдкреНрд╕:

1. **рд╣рд╛рддрд╛рдиреЗ рдлреНрд▓реЛ рдХрд╛рдвреВ рдирдХреЛрд╕** тАФ рдмреЛрд▓рддрд╛рдирд╛ рдореНрд╣рдг:
   > "рдорд╛рдЭреНрдпрд╛ рдХреЛрдб рд░реЗрдкреЛрдордзреНрдпреЗ Helm chart рдЖрд╣реЗ, deployment рд░реЗрдкреЛрдордзреНрдпреЗ values рдЖрд╣реЗрдд, ArgoCD рджреЛрдиреНрд╣реА рдЬреЛрдбрддреЛ."

2. **рдирд╛рд╡рдВ рд╕реНрдкрд╖реНрдЯ рдареЗрд╡**:
   - `avadesh-app`
   - `avadesh.k8s.genmills.com`
   - `k8s-applications/dev/...`

3. **Istio рдЪрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд░**:
   > "рдореА Istio рд╡рд╛рдкрд░рддреЛ routing рдЖрдгрд┐ security рд╕рд╛рдареА тАФ рдЖрдгрд┐ рддреНрдпрд╛рдЪрдВ host config рдореА `values.yaml` рдордзреНрдпреЗ рдареЗрд╡рддреЛ."

4. **GitOps рдЪрдВ рдорд╣рддреНрддреНрд╡ рд╕рд╛рдВрдЧ**:
   > "рдХреЛрдгрддрд╛рд╣реА рдбрд┐рдкреНрд▓реЙрдп рдлрдХреНрдд `git push` рдиреЗ рд╣реЛрддреЛ тАФ рдореНрд╣рдгреВрди рдЖрдореНрд╣рд╛рд▓рд╛ audit, rollback, approval workflows рд╕реЛрдкреЗ рдЬрд╛рддрд╛рдд."

---

## ЁЯЩМ рд╢реЗрд╡рдЯреА:

> рднрд╛рдК, рддреВ рд╣реЗ рд╕рдЧрд│рдВ рдЗрддрдХреНрдпрд╛ рдЫрд╛рдирдкрдгреЗ рд╕рдордЬрд▓рд╛рд╕ рдХреА рддреВ рдлрдХреНрдд **рдПрдХрд╛ рд╡рд╛рдХреНрдпрд╛рдд** рдЗрдВрдЯрд░рд╡реНрд╣реВрдордзреНрдпреЗ рд╕рд╛рдВрдЧреВ рд╢рдХрддреЛрд╕:

> **"рдореА GitOps рд╡рд╛рдкрд░рддреЛ тАФ рдорд╛рдЭрдВ рдХреЛрдб рдПрдХрд╛ рд░реЗрдкреЛрдордзреНрдпреЗ, deployment config рджреБрд╕рд▒реНрдпрд╛ рд░реЗрдкреЛрдордзреНрдпреЗ, ArgoCD рджреЛрдиреНрд╣реА рдЬреЛрдбреВрди EKS рд╡рд░ deploy рдХрд░рддреЛ, рдЖрдгрд┐ Istio рд╡рд╛рдкрд░реВрди рдореА рдорд╛рдЭрдВ app `avadesh.k8s.genmills.com` рд╡рд░ expose рдХрд░рддреЛ."**

---

### ЁЯТк рддреВ рддрдпрд╛рд░ рдЖрд╣реЗрд╕ рднрд╛рдК!  
рдЬрд░ рддреБрд▓рд╛ рд╣реЗ рд╕рдЧрд│рдВ рд╡реНрд╣рд┐рдЬреНрдпреБрдЕрд▓рд╛рдпрдЭ рдХрд░реВрди рджрд╛рдЦрд╡рд╛рдпрдЪрдВ рдЕрд╕реЗрд▓ (рдЬрд╕рдВ whiteboard рд╡рд░), рддрд░ рдореА рддреБрд▓рд╛ рдбрд╛рдпрдЧреНрд░рд╛рдо рджреЗрддреЛ.  
рдХрд┐рдВрд╡рд╛ рддреВ рдореНрд╣рдгрд╢реАрд▓ рддрд░, рдЖрдкрдг рдПрдХрд╛ рд▓рд╛рдИрд╡реНрд╣ рдЙрджрд╛рд╣рд░рдгрд╛рддреВрди рд░рд┐рд╣рд░реНрд╕ рдХрд░реВ.

рддреВ рдлрдХреНрдд рдмреЛрд▓ тАФ рдореА рддреБрдЭреНрдпрд╛ рдмрд░реЛрдмрд░ рдЖрд╣реЗ! ЁЯЪА
